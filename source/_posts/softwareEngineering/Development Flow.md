---
title: 管理文档 | 研发基本流程
tags:
  - 流程
categories: 软件工程
date: 2018-03-20
---
![avatar](https://bj.bcebos.com/v1/mysite/images/articles/3baf0c7a-7e45-4d4e-84d0-a5e9831f9f25.jpg)
 
### 引言

#### 范围
实际项目研发过程中，存在研发人员不熟悉整个开发流程，提测/发布内容不规范，不统一的问题。因此，该文档规定整个研发过程中，研发人员应该遵循的基本流程，并规范研发各个阶段的输入和输出，以此作为研发过程指导。文档只包括涉及研发整体流程的要求，不对测试和运维流程做具体要求。
<!-- more -->

####	涉众人员
【项目管理组】：xxx、xxx、xxx...
【产品组】：xxx、xxx、xxx...
【测试组】：xxx、xxx、xxx...
【运维组】：xxx、xxx、xxx...
【研发-设计实现组】：xxx、xxx、xxx...
【研发-需求分析组】：xxx、xxx、xxx...
【研发-版本控制组】：xxx、xxx、xxx...

### 研发基本流程

#### 需求接收 
![avatar](https://bj.bcebos.com/v1/mysite/images/201803/20180320100329.png)
1.	【产品组】按照实际需上线的产品需求，禅道中维护新的产品需求（包括新增功能的需求和日常运维需求），新增的功能需求必须要求提供需求文档；
2.	【研发-需求分析组】负责接收产品提供的新需求，并与产品组，测试组进行需求讨论和确认；
3.	【研发-需求分析组】经过基本的需求分析，对需求进行细化和分解工作；
4.	【研发-需求分析组】对此次需求研发给出任务工时评估，并依据目前研发资源进行任务排期；
5.	【研发-需求分析组】确定研发计划排期后，告知产品组和测试组研发计划起止时间，并邮件抄送项目管理组；
6.	【研发-需求分析组】研发内部对任务进行拆分和指派，并维护到禅道中，任务指定相关负责人和计划研发起止时间；

#### 研发实施
![avatar](https://bj.bcebos.com/v1/mysite/images/201803/20180320100400.png)
1.	【研发-设计实现组】禅道任务负责人开始任务；
2.	【研发-需求分析组】需要将分析后的任务需求传递给任务负责人；
3.	【研发-设计实现组】任务负责人理解任务需求，在理解过程中，可能跟产品需求提供者进行多次需求的讨论和确认；
4.	【研发-设计实现组】需求理解和确认完毕，开始分析和设计；
5.	【研发-版本控制组】决定该任务研发是否在分支上进行开发：
开发路径：保持1个主干路径，同时0个或多个分支路径。
a)	主干开发：【研发-设计实现组】在主干上进行编码实现；
b)	分支开发：【研发-版本控制组】建立分支路径，在分支上进行编码实现，提交测试前，必须合并代码到主干路径；

#### 提交测试 
![avatar](https://bj.bcebos.com/v1/mysite/images/201803/20180320100423.png)
1.	【研发-设计实现组】禅道任务负责人完成相关任务后，需将任务状态改成已完成；
2.	【研发-版本控制组】根据阶段性测试情况，综合下次上线内容，建立1个或多个提测目录（目录命名参考：Test_提测日期_功能名称）；
3.	【研发-设计实现组】打包好数据库脚本和程序文件，由版本控制组告知提测到哪个目录，将文件提交到对应提测目录；
4.	【研发-设计实现组】如果是任务首次提测，需告知版本控制组提测任务内容和提测文件路径，由版本控制组统一发提测邮件：
a)	邮件包括提测内容、文件路径；发送给测试组,并抄送项目管理组和测试组;
b)	一次可以提测多个任务，本次上线的所有任务以追加的方式写在同一封邮件中，方便测试组统计此次上线已测试内容；
5.	 【研发-设计实现组】如果是任务非首次提测，可以由任务负责人在ERP系统QQ群中告知提测文件路径,并标注提测修改的内容；
6.	【测试组】部署提测文件到测试环境服务器，并开始针对提测内容进行系统测试；
7.	【测试组】验证任务功能测试通过，可以进行下一阶段发布部署；
8.	【测试组】验证任务功能测试不通过，提交bug到禅道，由指定的负责人修复bug，bug修改完毕再次提测，测试回归，直至功能测试通过；

#### 发布部署 
![avatar](https://bj.bcebos.com/v1/mysite/images/201803/20180320100448.png)
1.	【测试组】验证上线内容已经测试完成，发起发布部署阶段，知会研发组可以实施部署请求；
2.	【研发-版本控制组】对测试完成的程序进行封板，同时创建好该里程碑的程序标签，作为此次上线功能保留的一个程序副本；
3.	【研发-版本控制组】通知各位负责人，检查提交测试目录相关文件：
a)	数据库脚本和程序文件;
b)	检查相关配置，更改相关测试环境配置为正式环境配置;
确认发布文件无误后，控制组人员编写部署文档，包括：
a)	部署站点及服务列表
b)	发布路径
c)	需覆盖替换文件及路径
d)	需修改文件内容
e)	数据库操作说明（用户权限需求，增减改字段，创建索引触发器需求等）
f)	其他特殊需求
编写完部文档，把发布文件和部署文档统一打包到发布正式目录（目录命名参考：XXxxx\_Release版本号\_提测时间\_上线时间\_功能名称），通知测试组可以开始后续部署工作，并抄送项目管理组和产品组；
4.	【测试组】从发布正式目录中获取部署相关文件，拷贝至运维部署目录，并邮件通知运维组可以部署，说明部署时间、部署文件目录，抄送项目管理组和研发组；
5.	【运维组】获取运维部署目录，在指定的部署时间，开始部署：
a)	备份线上程序文件；
b)	执行数据库脚本；
c)	按照部署文档中说明部署，将部署文件部署到线上环境（包括主备）;
部署完成后，邮件通知管理组、研发组、测试组、产品组；
6.	【测试组】或【研发组】收到部署完成邮件后，可能对线上环境和此次上线功能做验证，查看是否部署正确。

#### 线上运维 
![avatar](https://bj.bcebos.com/v1/mysite/images/201803/20180320100508.png)
线上运维针对以下2种情况：
1.	新上线的功能需要初始化配置数据，或者历史数据需要修复：
a)	【研发组】编写数据库相应的脚本，并保留本地，方便下次需要再次执行；
b)	【研发组】线上执行数据库脚本，并验证脚本是否正确执行且数据已无问题；
2.	上线的功能有bug且影响用户正常使用，需要紧急修复:
a)	【研发组】在之前上线部署时建立的程序标签Tag上做修改，修改的内容需要同步主干程序，修改完成后，提交测试；
b)	【测试组】验证问题已修复，告知研发组可以线上进行修复部署；若未修复，告知研发再次修改；
c)	【研发组】确认问题已修复，这时分2种情况：
1）	相对独立bug，经过测试可以单独部署的，由研发组执行以下操作：
1.主服务器建立back目录建立文件夹：日期_序号_xuli(部署人)，并建立命名为Old和New子文件夹；
2.保存线上需要替换的程序至Old文件夹；
3.保存此次替换的程序至New文件夹；
4.覆盖线上需要替换的程序；
5.备机管理员身份运行rsync.bat，进行主备同步；
6.备份完成后，将相关补丁文件部署到线上环境，并检查部署是否正常；
7.线上运维结束后，研发组通知产品组和测试组，线上运维工作完成。
2）	经过测试、需要按正常流程提测部署的：
后续流程同正常发布部署流程，不做祥述。
